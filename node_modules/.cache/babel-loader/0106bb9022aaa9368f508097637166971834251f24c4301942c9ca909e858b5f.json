{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{ChevronDown}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const formatSizeRange=sizeRange=>{if(!sizeRange)return'';// Convert \"Sto3XL\" to \"S to 3XL\"\nreturn sizeRange.replace(/to/gi,' to ').replace(/([a-zA-Z])(\\d)/g,'$1 $2').replace(/(\\d)([a-zA-Z])/g,'$1$2').trim();};const formatPrice=priceRange=>{if(!priceRange)return'';if(priceRange.min===priceRange.max){return\"\\xA3\".concat(priceRange.min.toFixed(2));}return\"\\xA3\".concat(priceRange.min.toFixed(2),\" - \\xA3\").concat(priceRange.max.toFixed(2));};const ProductCard=_ref=>{var _productGroup$colors$2,_productGroup$style_n,_productGroup$colors$3;let{productGroup,viewMode='grid'}=_ref;const[selectedColor,setSelectedColor]=useState(0);const[showColorDropdown,setShowColorDropdown]=useState(false);const navigate=useNavigate();const currentVariant=productGroup.variants.find(v=>{var _productGroup$colors$;return v.colour_code===((_productGroup$colors$=productGroup.colors[selectedColor])===null||_productGroup$colors$===void 0?void 0:_productGroup$colors$.code);})||productGroup.variants[0];const currentImage=((_productGroup$colors$2=productGroup.colors[selectedColor])===null||_productGroup$colors$2===void 0?void 0:_productGroup$colors$2.image)||(currentVariant===null||currentVariant===void 0?void 0:currentVariant.colour_image)||(currentVariant===null||currentVariant===void 0?void 0:currentVariant.primary_product_image_url);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-card \".concat(viewMode),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-image-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:currentImage!=='Not available'?currentImage:'https://via.placeholder.com/400x400/1a1a1a/78BE20?text='+encodeURIComponent(((_productGroup$style_n=productGroup.style_name)===null||_productGroup$style_n===void 0?void 0:_productGroup$style_n.slice(0,2))||'P'),alt:productGroup.style_name,onError:e=>{var _productGroup$style_n2;e.currentTarget.src='https://via.placeholder.com/400x400/1a1a1a/78BE20?text='+encodeURIComponent(((_productGroup$style_n2=productGroup.style_name)===null||_productGroup$style_n2===void 0?void 0:_productGroup$style_n2.slice(0,2))||'P');},loading:\"lazy\"}),(currentVariant===null||currentVariant===void 0?void 0:currentVariant.sustainable_organic)==='Yes'&&/*#__PURE__*/_jsx(\"div\",{className:\"sustainability-badge\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u267B\\uFE0F Sustainable\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"view-more-btn-fixed\",onClick:()=>navigate(\"/products/\".concat(productGroup.style_code)),children:\"View More\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:productGroup.style_name}),/*#__PURE__*/_jsx(\"p\",{className:\"product-brand\",children:productGroup.brand})]}),productGroup.price_range&&/*#__PURE__*/_jsx(\"div\",{className:\"product-price\",children:formatPrice(productGroup.price_range)}),productGroup.colors.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"color-dropdown-container \".concat(showColorDropdown?'open':''),children:[/*#__PURE__*/_jsxs(\"button\",{className:\"color-dropdown-trigger\",onClick:()=>setShowColorDropdown(!showColorDropdown),onBlur:()=>setTimeout(()=>setShowColorDropdown(false),150),children:[/*#__PURE__*/_jsx(\"span\",{className:\"selected-color-text\",children:((_productGroup$colors$3=productGroup.colors[selectedColor])===null||_productGroup$colors$3===void 0?void 0:_productGroup$colors$3.name)||'Select Color'}),/*#__PURE__*/_jsx(ChevronDown,{size:16,className:\"dropdown-arrow\"})]}),showColorDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"color-dropdown-menu\",children:productGroup.colors.map((color,index)=>/*#__PURE__*/_jsxs(\"button\",{className:\"color-dropdown-option \".concat(selectedColor===index?'selected':''),onClick:()=>{setSelectedColor(index);setShowColorDropdown(false);},children:[/*#__PURE__*/_jsx(\"span\",{className:\"color-indicator\",style:{backgroundColor:color.rgb}}),/*#__PURE__*/_jsx(\"span\",{className:\"color-name\",children:color.name})]},color.code))})]}),viewMode==='list'&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"product-sku\",children:[\"SKU: \",currentVariant===null||currentVariant===void 0?void 0:currentVariant.sku_code]}),/*#__PURE__*/_jsx(\"span\",{className:\"product-sizes\",children:formatSizeRange(productGroup.size_range)})]}),(currentVariant===null||currentVariant===void 0?void 0:currentVariant.specification)&&/*#__PURE__*/_jsxs(\"p\",{className:\"product-description\",children:[currentVariant.specification.slice(0,120),\"...\"]})]})]})]});};export default ProductCard;","map":{"version":3,"names":["React","useState","useNavigate","ChevronDown","jsx","_jsx","jsxs","_jsxs","formatSizeRange","sizeRange","replace","trim","formatPrice","priceRange","min","max","concat","toFixed","ProductCard","_ref","_productGroup$colors$2","_productGroup$style_n","_productGroup$colors$3","productGroup","viewMode","selectedColor","setSelectedColor","showColorDropdown","setShowColorDropdown","navigate","currentVariant","variants","find","v","_productGroup$colors$","colour_code","colors","code","currentImage","image","colour_image","primary_product_image_url","className","children","src","encodeURIComponent","style_name","slice","alt","onError","e","_productGroup$style_n2","currentTarget","loading","sustainable_organic","onClick","style_code","brand","price_range","length","onBlur","setTimeout","name","size","map","color","index","style","backgroundColor","rgb","sku_code","size_range","specification"],"sources":["/home/alastair/Desktop/outpost-custom/outpost-custom/src/components/ProductCard.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ChevronDown } from 'lucide-react';\nimport { Product } from '../lib/supabase';\n\ninterface ProductGroup {\n  style_code: string;\n  style_name: string;\n  brand: string;\n  variants: Product[];\n  colors: Array<{\n    code: string;\n    name: string;\n    rgb: string;\n    image: string;\n  }>;\n  size_range: string;\n  price_range?: { min: number; max: number };\n}\n\ninterface ProductCardProps {\n  productGroup: ProductGroup;\n  viewMode?: 'grid' | 'list';\n}\n\nconst formatSizeRange = (sizeRange: string): string => {\n  if (!sizeRange) return '';\n  \n  // Convert \"Sto3XL\" to \"S to 3XL\"\n  return sizeRange\n    .replace(/to/gi, ' to ')\n    .replace(/([a-zA-Z])(\\d)/g, '$1 $2')\n    .replace(/(\\d)([a-zA-Z])/g, '$1$2')\n    .trim();\n};\n\nconst formatPrice = (priceRange?: { min: number; max: number }): string => {\n  if (!priceRange) return '';\n  \n  if (priceRange.min === priceRange.max) {\n    return `£${priceRange.min.toFixed(2)}`;\n  }\n  \n  return `£${priceRange.min.toFixed(2)} - £${priceRange.max.toFixed(2)}`;\n};\n\nconst ProductCard: React.FC<ProductCardProps> = ({ productGroup, viewMode = 'grid' }) => {\n  const [selectedColor, setSelectedColor] = useState(0);\n  const [showColorDropdown, setShowColorDropdown] = useState(false);\n  const navigate = useNavigate();\n  \n  const currentVariant = productGroup.variants.find(v => \n    v.colour_code === productGroup.colors[selectedColor]?.code\n  ) || productGroup.variants[0];\n  \n  const currentImage = productGroup.colors[selectedColor]?.image || \n    currentVariant?.colour_image || \n    currentVariant?.primary_product_image_url;\n\n  return (\n    <div className={`product-card ${viewMode}`}>\n      <div className=\"product-image-wrapper\">\n        <img\n          src={currentImage !== 'Not available' \n            ? currentImage \n            : 'https://via.placeholder.com/400x400/1a1a1a/78BE20?text=' + encodeURIComponent(productGroup.style_name?.slice(0, 2) || 'P')\n          }\n          alt={productGroup.style_name}\n          onError={(e) => {\n            e.currentTarget.src = 'https://via.placeholder.com/400x400/1a1a1a/78BE20?text=' + encodeURIComponent(productGroup.style_name?.slice(0, 2) || 'P');\n          }}\n          loading=\"lazy\"\n        />\n        \n        {/* Sustainability Badge */}\n        {currentVariant?.sustainable_organic === 'Yes' && (\n          <div className=\"sustainability-badge\">\n            <span>♻️ Sustainable</span>\n          </div>\n        )}\n\n        {/* View More Button - Fixed Position */}\n        <button \n          className=\"view-more-btn-fixed\"\n          onClick={() => navigate(`/products/${productGroup.style_code}`)}\n        >\n          View More\n        </button>\n      </div>\n      \n      <div className=\"product-info\">\n        <div className=\"product-header\">\n          <h3 className=\"product-name\">{productGroup.style_name}</h3>\n          <p className=\"product-brand\">{productGroup.brand}</p>\n        </div>\n        \n        {/* Price */}\n        {productGroup.price_range && (\n          <div className=\"product-price\">\n            {formatPrice(productGroup.price_range)}\n          </div>\n        )}\n        \n        {/* Color Dropdown */}\n        {productGroup.colors.length > 1 && (\n          <div className={`color-dropdown-container ${showColorDropdown ? 'open' : ''}`}>\n            <button \n              className=\"color-dropdown-trigger\"\n              onClick={() => setShowColorDropdown(!showColorDropdown)}\n              onBlur={() => setTimeout(() => setShowColorDropdown(false), 150)}\n            >\n              <span className=\"selected-color-text\">\n                {productGroup.colors[selectedColor]?.name || 'Select Color'}\n              </span>\n              <ChevronDown size={16} className=\"dropdown-arrow\" />\n            </button>\n            \n            {showColorDropdown && (\n              <div className=\"color-dropdown-menu\">\n                {productGroup.colors.map((color, index) => (\n                  <button\n                    key={color.code}\n                    className={`color-dropdown-option ${selectedColor === index ? 'selected' : ''}`}\n                    onClick={() => {\n                      setSelectedColor(index);\n                      setShowColorDropdown(false);\n                    }}\n                  >\n                    <span \n                      className=\"color-indicator\" \n                      style={{ backgroundColor: color.rgb }}\n                    />\n                    <span className=\"color-name\">{color.name}</span>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n        \n        {viewMode === 'list' && (\n          <div className=\"product-details\">\n            <div className=\"product-meta\">\n              <span className=\"product-sku\">SKU: {currentVariant?.sku_code}</span>\n              <span className=\"product-sizes\">{formatSizeRange(productGroup.size_range)}</span>\n            </div>\n            \n            {currentVariant?.specification && (\n              <p className=\"product-description\">\n                {currentVariant.specification.slice(0, 120)}...\n              </p>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ProductCard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}