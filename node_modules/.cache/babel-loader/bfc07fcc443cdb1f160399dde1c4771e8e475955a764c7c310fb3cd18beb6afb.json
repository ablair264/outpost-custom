{"ast":null,"code":"var _jsxFileName = \"/home/alastair/Desktop/outpost-custom/outpost-custom/src/pages/ProductListing.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { getProductsByCategory, getCategoriesWithCounts } from '../lib/supabase';\n// FilterModal removed - using AdvancedFilterModal in ProductBrowser instead\n// import { filterProducts } from '../utils/filterProducts'; // Removed - not using old filter system\nimport { parseAccreditations } from '../utils/parseAccreditations';\nimport './ProductListing.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatSizeRange = sizeRange => {\n  if (!sizeRange) return '';\n\n  // Convert \"Sto3XL\" to \"S to 3XL\"\n  return sizeRange.replace(/to/gi, ' to ').replace(/([a-zA-Z])(\\d)/g, '$1 $2').replace(/(\\d)([a-zA-Z])/g, '$1$2').trim();\n};\nconst ProductCard = ({\n  productGroup\n}) => {\n  _s();\n  var _productGroup$colors$2, _productGroup$style_n;\n  const [selectedColor, setSelectedColor] = useState(0);\n  const currentVariant = productGroup.variants.find(v => {\n    var _productGroup$colors$;\n    return v.colour_code === ((_productGroup$colors$ = productGroup.colors[selectedColor]) === null || _productGroup$colors$ === void 0 ? void 0 : _productGroup$colors$.code);\n  }) || productGroup.variants[0];\n  const currentImage = ((_productGroup$colors$2 = productGroup.colors[selectedColor]) === null || _productGroup$colors$2 === void 0 ? void 0 : _productGroup$colors$2.image) || (currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.colour_image) || (currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.primary_product_image_url);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-image-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: currentImage !== 'Not available' ? currentImage : 'https://via.placeholder.com/400x400/1a1a1a/78BE20?text=' + encodeURIComponent(((_productGroup$style_n = productGroup.style_name) === null || _productGroup$style_n === void 0 ? void 0 : _productGroup$style_n.slice(0, 2)) || 'P'),\n        alt: productGroup.style_name,\n        onError: e => {\n          var _productGroup$style_n2;\n          e.currentTarget.src = 'https://via.placeholder.com/400x400/1a1a1a/78BE20?text=' + encodeURIComponent(((_productGroup$style_n2 = productGroup.style_name) === null || _productGroup$style_n2 === void 0 ? void 0 : _productGroup$style_n2.slice(0, 2)) || 'P');\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/images/green-arrow.png\",\n          alt: \"View product\",\n          className: \"product-arrow-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"product-name\",\n        children: productGroup.style_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"product-brand\",\n        children: productGroup.brand\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"color-swatches\",\n        children: productGroup.colors.map((color, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `color-swatch ${selectedColor === index ? 'active' : ''}`,\n          style: {\n            backgroundColor: color.rgb\n          },\n          onClick: () => setSelectedColor(index),\n          title: color.name\n        }, color.code, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"product-sku\",\n          children: [\"SKU: \", currentVariant === null || currentVariant === void 0 ? void 0 : currentVariant.sku_code]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"product-sizes\",\n          children: formatSizeRange(productGroup.size_range)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductCard, \"XE6MUYGNpu+rU9B0jEmOiCobusI=\");\n_c = ProductCard;\nconst ProductListing = () => {\n  _s2();\n  const {\n    categoryId\n  } = useParams();\n  const [searchParams] = useSearchParams();\n  const categoryParam = searchParams.get('category');\n  const [allProducts, setAllProducts] = useState([]);\n  const [productGroups, setProductGroups] = useState([]);\n  const [category, setCategory] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  // Removed filter modal - using ProductBrowser for advanced filtering\n  // Removed old filter state - using simple category-based filtering only\n\n  const productsPerPage = 12;\n\n  // Generate filter options from products\n  const filterOptions = useMemo(() => {\n    if (!allProducts.length) return {\n      materials: [],\n      categories: [],\n      priceRange: {\n        min: 0,\n        max: 1000\n      },\n      productTypes: [],\n      sizes: [],\n      colors: [],\n      colorShades: [],\n      brands: [],\n      genders: [],\n      ageGroups: [],\n      accreditations: []\n    };\n\n    // Extract unique values\n    const materials = new Set();\n    const categories = new Set();\n    const accreditationsRaw = [];\n    allProducts.forEach(product => {\n      // Extract materials from fabric\n      if (product.fabric) {\n        const commonMaterials = ['Cotton', 'Polyester', 'Wool', 'Denim', 'Fleece', 'Canvas', 'Merino', 'Terry Cloth', 'Jersey', 'Teddy', 'Corduroy', 'Leather', 'Twill', 'French Terry', 'Silk', 'Linen', 'Nylon', 'Viscose', 'Acrylic', 'Spandex', 'Elastane', 'Polyamide', 'Modal', 'Bamboo'];\n        commonMaterials.forEach(material => {\n          if (product.fabric && product.fabric.toLowerCase().includes(material.toLowerCase())) {\n            materials.add(material);\n          }\n        });\n      }\n\n      // Extract categories\n      if (product.categorisation) {\n        product.categorisation.split('|').forEach(cat => {\n          const trimmedCat = cat.trim();\n          if (trimmedCat && !trimmedCat.includes('Top 1000') && !trimmedCat.includes('DM') && !trimmedCat.includes('Raladeal') && !trimmedCat.includes('Edge -') && !trimmedCat.includes('New in') && !trimmedCat.includes('Must Haves')) {\n            categories.add(trimmedCat);\n          }\n        });\n      }\n\n      // Collect accreditations\n      if (product.accreditations) {\n        accreditationsRaw.push({\n          accreditations: product.accreditations\n        });\n      }\n    });\n    const prices = allProducts.map(p => parseFloat(p.single_price)).filter(p => !isNaN(p) && p > 0);\n    return {\n      materials: Array.from(materials).sort(),\n      categories: Array.from(categories).sort(),\n      priceRange: prices.length > 0 ? {\n        min: Math.floor(Math.min(...prices)),\n        max: Math.ceil(Math.max(...prices))\n      } : {\n        min: 0,\n        max: 1000\n      },\n      productTypes: Array.from(new Set(allProducts.map(p => p.product_type).filter(Boolean))).sort(),\n      sizes: Array.from(new Set(allProducts.map(p => p.size_name).filter(Boolean))).sort(),\n      colors: Array.from(new Set(allProducts.map(p => p.primary_colour).filter(Boolean))).sort(),\n      colorShades: Array.from(new Set(allProducts.map(p => p.colour_shade).filter(shade => Boolean(shade)))).sort(),\n      brands: Array.from(new Set(allProducts.map(p => p.brand).filter(Boolean))).sort(),\n      genders: Array.from(new Set(allProducts.map(p => p.gender).filter(Boolean))).sort(),\n      ageGroups: Array.from(new Set(allProducts.map(p => p.age_group).filter(age => Boolean(age)))).sort(),\n      accreditations: parseAccreditations(accreditationsRaw)\n    };\n  }, [allProducts]);\n\n  // Removed filter price range setup\n\n  // Fetch products\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setLoading(true);\n\n        // Get category info first\n        const categories = await getCategoriesWithCounts();\n        const currentCategory = categories.find(cat => cat.id === categoryId || cat.category_key === categoryParam || cat.category_key.toLowerCase().replace(/\\s+/g, '-') === categoryId);\n        if (currentCategory) {\n          setCategory(currentCategory);\n\n          // Fetch products for this category\n          const categoryKey = currentCategory.category_key;\n          const productData = await getProductsByCategory(categoryKey);\n          setAllProducts(productData);\n        } else {\n          console.error('Category not found:', categoryId || categoryParam);\n        }\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (categoryId || categoryParam) {\n      fetchProducts();\n    }\n  }, [categoryId, categoryParam]);\n\n  // Apply filters and pagination\n  useEffect(() => {\n    if (!allProducts.length) return;\n\n    // No filtering - show all products from category\n    const filteredProducts = allProducts;\n\n    // Group products by style_code\n    const groupedProducts = filteredProducts.reduce((groups, product) => {\n      const styleCode = product.style_code || 'unknown';\n      if (!groups[styleCode]) {\n        groups[styleCode] = [];\n      }\n      groups[styleCode].push(product);\n      return groups;\n    }, {});\n\n    // Convert to ProductGroup format\n    const allProductGroups = Object.entries(groupedProducts).map(([styleCode, variants]) => {\n      const firstVariant = variants[0];\n\n      // Get unique colors for this style\n      const uniqueColors = variants.reduce((colors, variant) => {\n        const existingColor = colors.find(c => c.code === variant.colour_code);\n        if (!existingColor && variant.colour_code) {\n          // Parse RGB values\n          let rgbValue = '#cccccc';\n          if (variant.rgb) {\n            const rgbParts = variant.rgb.split('|')[0].trim();\n            const rgbNumbers = rgbParts.match(/\\d+/g);\n            if (rgbNumbers && rgbNumbers.length >= 3) {\n              const r = parseInt(rgbNumbers[0]);\n              const g = parseInt(rgbNumbers[1]);\n              const b = parseInt(rgbNumbers[2]);\n              rgbValue = `rgb(${r}, ${g}, ${b})`;\n            }\n          }\n          colors.push({\n            code: variant.colour_code,\n            name: variant.colour_name || variant.colour_code,\n            rgb: rgbValue,\n            image: variant.colour_image || variant.primary_product_image_url\n          });\n        }\n        return colors;\n      }, []);\n      return {\n        style_code: styleCode,\n        style_name: firstVariant.style_name,\n        brand: firstVariant.brand,\n        variants,\n        colors: uniqueColors,\n        size_range: firstVariant.size_range || ''\n      };\n    });\n\n    // Calculate pagination\n    const total = Math.ceil(allProductGroups.length / productsPerPage);\n    setTotalPages(total);\n\n    // Get product groups for current page\n    const startIndex = (page - 1) * productsPerPage;\n    const endIndex = startIndex + productsPerPage;\n    const paginatedGroups = allProductGroups.slice(startIndex, endIndex);\n    setProductGroups(paginatedGroups);\n  }, [allProducts, page]);\n  const handlePageChange = newPage => {\n    setPage(newPage);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n\n  // Removed filter count function\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-listing-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading-message\",\n          children: \"Loading products...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this);\n  }\n  if (!category) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-listing-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: \"Category not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-listing-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"breadcrumb\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/categories\",\n            children: \"Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"breadcrumb-separator\",\n            children: \"\\u203A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"breadcrumb-current\",\n            children: category.display_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page-header-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"page-title\",\n              children: category.display_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"page-subtitle\",\n              children: productGroups.length === 0 ? `${category.product_count} products available` : `${productGroups.length} products found`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products-grid\",\n        children: productGroups.map(productGroup => /*#__PURE__*/_jsxDEV(ProductCard, {\n          productGroup: productGroup\n        }, productGroup.style_code, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handlePageChange(page - 1),\n          disabled: page === 1,\n          className: \"pagination-button\",\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination-numbers\",\n          children: Array.from({\n            length: totalPages\n          }, (_, i) => i + 1).map(pageNum => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handlePageChange(pageNum),\n            className: `pagination-number ${page === pageNum ? 'active' : ''}`,\n            children: pageNum\n          }, pageNum, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handlePageChange(page + 1),\n          disabled: page === totalPages,\n          className: \"pagination-button\",\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this), productGroups.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-products\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No products found matching your filters.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 330,\n    columnNumber: 5\n  }, this);\n};\n_s2(ProductListing, \"4UDZWxLI7+NVJbNq3pPvvJZsbJQ=\", false, function () {\n  return [useParams, useSearchParams];\n});\n_c2 = ProductListing;\nexport default ProductListing;\nvar _c, _c2;\n$RefreshReg$(_c, \"ProductCard\");\n$RefreshReg$(_c2, \"ProductListing\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useParams","useSearchParams","getProductsByCategory","getCategoriesWithCounts","parseAccreditations","jsxDEV","_jsxDEV","formatSizeRange","sizeRange","replace","trim","ProductCard","productGroup","_s","_productGroup$colors$2","_productGroup$style_n","selectedColor","setSelectedColor","currentVariant","variants","find","v","_productGroup$colors$","colour_code","colors","code","currentImage","image","colour_image","primary_product_image_url","className","children","src","encodeURIComponent","style_name","slice","alt","onError","e","_productGroup$style_n2","currentTarget","fileName","_jsxFileName","lineNumber","columnNumber","brand","map","color","index","style","backgroundColor","rgb","onClick","title","name","sku_code","size_range","_c","ProductListing","_s2","categoryId","searchParams","categoryParam","get","allProducts","setAllProducts","productGroups","setProductGroups","category","setCategory","loading","setLoading","page","setPage","totalPages","setTotalPages","productsPerPage","filterOptions","length","materials","categories","priceRange","min","max","productTypes","sizes","colorShades","brands","genders","ageGroups","accreditations","Set","accreditationsRaw","forEach","product","fabric","commonMaterials","material","toLowerCase","includes","add","categorisation","split","cat","trimmedCat","push","prices","p","parseFloat","single_price","filter","isNaN","Array","from","sort","Math","floor","ceil","product_type","Boolean","size_name","primary_colour","colour_shade","shade","gender","age_group","age","fetchProducts","currentCategory","id","category_key","categoryKey","productData","console","error","filteredProducts","groupedProducts","reduce","groups","styleCode","style_code","allProductGroups","Object","entries","firstVariant","uniqueColors","variant","existingColor","c","rgbValue","rgbParts","rgbNumbers","match","r","parseInt","g","b","colour_name","total","startIndex","endIndex","paginatedGroups","handlePageChange","newPage","window","scrollTo","top","behavior","href","display_name","product_count","disabled","_","i","pageNum","_c2","$RefreshReg$"],"sources":["/home/alastair/Desktop/outpost-custom/outpost-custom/src/pages/ProductListing.tsx"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport { useParams, useSearchParams } from 'react-router-dom';\nimport { getProductsByCategory, getCategoriesWithCounts } from '../lib/supabase';\nimport { Product, CategoryData } from '../lib/supabase';\nimport { Filter } from 'lucide-react';\n// FilterModal removed - using AdvancedFilterModal in ProductBrowser instead\n// import { filterProducts } from '../utils/filterProducts'; // Removed - not using old filter system\nimport { parseAccreditations } from '../utils/parseAccreditations';\nimport './ProductListing.css';\n\ninterface ProductGroup {\n  style_code: string;\n  style_name: string;\n  brand: string;\n  variants: Product[];\n  colors: Array<{\n    code: string;\n    name: string;\n    rgb: string;\n    image: string;\n  }>;\n  size_range: string;\n}\n\ninterface ProductCardProps {\n  productGroup: ProductGroup;\n}\n\nconst formatSizeRange = (sizeRange: string): string => {\n  if (!sizeRange) return '';\n  \n  // Convert \"Sto3XL\" to \"S to 3XL\"\n  return sizeRange\n    .replace(/to/gi, ' to ')\n    .replace(/([a-zA-Z])(\\d)/g, '$1 $2')\n    .replace(/(\\d)([a-zA-Z])/g, '$1$2')\n    .trim();\n};\n\nconst ProductCard: React.FC<ProductCardProps> = ({ productGroup }) => {\n  const [selectedColor, setSelectedColor] = useState(0);\n  \n  const currentVariant = productGroup.variants.find(v => \n    v.colour_code === productGroup.colors[selectedColor]?.code\n  ) || productGroup.variants[0];\n  \n  const currentImage = productGroup.colors[selectedColor]?.image || \n    currentVariant?.colour_image || \n    currentVariant?.primary_product_image_url;\n\n  return (\n    <div className=\"product-card\">\n      <div className=\"product-image-wrapper\">\n        <img\n          src={currentImage !== 'Not available' \n            ? currentImage \n            : 'https://via.placeholder.com/400x400/1a1a1a/78BE20?text=' + encodeURIComponent(productGroup.style_name?.slice(0, 2) || 'P')\n          }\n          alt={productGroup.style_name}\n          onError={(e) => {\n            e.currentTarget.src = 'https://via.placeholder.com/400x400/1a1a1a/78BE20?text=' + encodeURIComponent(productGroup.style_name?.slice(0, 2) || 'P');\n          }}\n        />\n        <div className=\"product-overlay\">\n          <img src=\"/images/green-arrow.png\" alt=\"View product\" className=\"product-arrow-icon\" />\n        </div>\n      </div>\n      <div className=\"product-info\">\n        <h3 className=\"product-name\">{productGroup.style_name}</h3>\n        <p className=\"product-brand\">{productGroup.brand}</p>\n        \n        {/* Color Swatches */}\n        <div className=\"color-swatches\">\n          {productGroup.colors.map((color, index) => (\n            <button\n              key={color.code}\n              className={`color-swatch ${selectedColor === index ? 'active' : ''}`}\n              style={{ backgroundColor: color.rgb }}\n              onClick={() => setSelectedColor(index)}\n              title={color.name}\n            />\n          ))}\n        </div>\n        \n        <div className=\"product-details\">\n          <span className=\"product-sku\">SKU: {currentVariant?.sku_code}</span>\n          <span className=\"product-sizes\">{formatSizeRange(productGroup.size_range)}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ProductListing: React.FC = () => {\n  const { categoryId } = useParams<{ categoryId: string }>();\n  const [searchParams] = useSearchParams();\n  const categoryParam = searchParams.get('category');\n  \n  const [allProducts, setAllProducts] = useState<Product[]>([]);\n  const [productGroups, setProductGroups] = useState<ProductGroup[]>([]);\n  const [category, setCategory] = useState<CategoryData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  // Removed filter modal - using ProductBrowser for advanced filtering\n// Removed old filter state - using simple category-based filtering only\n  \n  const productsPerPage = 12;\n\n  // Generate filter options from products\n  const filterOptions = useMemo(() => {\n    if (!allProducts.length) return {\n      materials: [],\n      categories: [],\n      priceRange: { min: 0, max: 1000 },\n      productTypes: [],\n      sizes: [],\n      colors: [],\n      colorShades: [],\n      brands: [],\n      genders: [],\n      ageGroups: [],\n      accreditations: []\n    };\n\n    // Extract unique values\n    const materials = new Set<string>();\n    const categories = new Set<string>();\n    const accreditationsRaw: { accreditations: string }[] = [];\n    \n    allProducts.forEach(product => {\n      // Extract materials from fabric\n      if (product.fabric) {\n        const commonMaterials = [\n          'Cotton', 'Polyester', 'Wool', 'Denim', 'Fleece', 'Canvas',\n          'Merino', 'Terry Cloth', 'Jersey', 'Teddy', 'Corduroy', 'Leather',\n          'Twill', 'French Terry', 'Silk', 'Linen', 'Nylon', 'Viscose',\n          'Acrylic', 'Spandex', 'Elastane', 'Polyamide', 'Modal', 'Bamboo'\n        ];\n        \n        commonMaterials.forEach(material => {\n          if (product.fabric && product.fabric.toLowerCase().includes(material.toLowerCase())) {\n            materials.add(material);\n          }\n        });\n      }\n      \n      // Extract categories\n      if (product.categorisation) {\n        product.categorisation.split('|').forEach(cat => {\n          const trimmedCat = cat.trim();\n          if (trimmedCat && \n              !trimmedCat.includes('Top 1000') &&\n              !trimmedCat.includes('DM') &&\n              !trimmedCat.includes('Raladeal') &&\n              !trimmedCat.includes('Edge -') &&\n              !trimmedCat.includes('New in') &&\n              !trimmedCat.includes('Must Haves')) {\n            categories.add(trimmedCat);\n          }\n        });\n      }\n      \n      // Collect accreditations\n      if (product.accreditations) {\n        accreditationsRaw.push({ accreditations: product.accreditations });\n      }\n    });\n    \n    const prices = allProducts\n      .map(p => parseFloat(p.single_price))\n      .filter(p => !isNaN(p) && p > 0);\n    \n    return {\n      materials: Array.from(materials).sort(),\n      categories: Array.from(categories).sort(),\n      priceRange: prices.length > 0 ? {\n        min: Math.floor(Math.min(...prices)),\n        max: Math.ceil(Math.max(...prices))\n      } : { min: 0, max: 1000 },\n      productTypes: Array.from(new Set(allProducts.map(p => p.product_type).filter(Boolean))).sort(),\n      sizes: Array.from(new Set(allProducts.map(p => p.size_name).filter(Boolean))).sort(),\n      colors: Array.from(new Set(allProducts.map(p => p.primary_colour).filter(Boolean))).sort(),\n      colorShades: Array.from(new Set(allProducts.map(p => p.colour_shade).filter((shade): shade is string => Boolean(shade)))).sort(),\n      brands: Array.from(new Set(allProducts.map(p => p.brand).filter(Boolean))).sort(),\n      genders: Array.from(new Set(allProducts.map(p => p.gender).filter(Boolean))).sort(),\n      ageGroups: Array.from(new Set(allProducts.map(p => p.age_group).filter((age): age is string => Boolean(age)))).sort(),\n      accreditations: parseAccreditations(accreditationsRaw)\n    };\n  }, [allProducts]);\n\n  // Removed filter price range setup\n\n  // Fetch products\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setLoading(true);\n        \n        // Get category info first\n        const categories = await getCategoriesWithCounts();\n        const currentCategory = categories.find(cat => \n          cat.id === categoryId || \n          cat.category_key === categoryParam ||\n          cat.category_key.toLowerCase().replace(/\\s+/g, '-') === categoryId\n        );\n        \n        if (currentCategory) {\n          setCategory(currentCategory);\n          \n          // Fetch products for this category\n          const categoryKey = currentCategory.category_key;\n          const productData = await getProductsByCategory(categoryKey);\n          setAllProducts(productData);\n        } else {\n          console.error('Category not found:', categoryId || categoryParam);\n        }\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (categoryId || categoryParam) {\n      fetchProducts();\n    }\n  }, [categoryId, categoryParam]);\n\n  // Apply filters and pagination\n  useEffect(() => {\n    if (!allProducts.length) return;\n\n    // No filtering - show all products from category\n    const filteredProducts = allProducts;\n    \n    // Group products by style_code\n    const groupedProducts = filteredProducts.reduce((groups: Record<string, Product[]>, product) => {\n      const styleCode = product.style_code || 'unknown';\n      if (!groups[styleCode]) {\n        groups[styleCode] = [];\n      }\n      groups[styleCode].push(product);\n      return groups;\n    }, {});\n    \n    // Convert to ProductGroup format\n    const allProductGroups: ProductGroup[] = Object.entries(groupedProducts).map(([styleCode, variants]) => {\n      const firstVariant = variants[0];\n      \n      // Get unique colors for this style\n      const uniqueColors = variants.reduce((colors: Array<{code: string, name: string, rgb: string, image: string}>, variant) => {\n        const existingColor = colors.find(c => c.code === variant.colour_code);\n        if (!existingColor && variant.colour_code) {\n          // Parse RGB values\n          let rgbValue = '#cccccc';\n          \n          if (variant.rgb) {\n            const rgbParts = variant.rgb.split('|')[0].trim();\n            const rgbNumbers = rgbParts.match(/\\d+/g);\n            \n            if (rgbNumbers && rgbNumbers.length >= 3) {\n              const r = parseInt(rgbNumbers[0]);\n              const g = parseInt(rgbNumbers[1]);\n              const b = parseInt(rgbNumbers[2]);\n              rgbValue = `rgb(${r}, ${g}, ${b})`;\n            }\n          }\n          \n          colors.push({\n            code: variant.colour_code,\n            name: variant.colour_name || variant.colour_code,\n            rgb: rgbValue,\n            image: variant.colour_image || variant.primary_product_image_url\n          });\n        }\n        return colors;\n      }, []);\n      \n      return {\n        style_code: styleCode,\n        style_name: firstVariant.style_name,\n        brand: firstVariant.brand,\n        variants,\n        colors: uniqueColors,\n        size_range: firstVariant.size_range || ''\n      };\n    });\n    \n    // Calculate pagination\n    const total = Math.ceil(allProductGroups.length / productsPerPage);\n    setTotalPages(total);\n    \n    // Get product groups for current page\n    const startIndex = (page - 1) * productsPerPage;\n    const endIndex = startIndex + productsPerPage;\n    const paginatedGroups = allProductGroups.slice(startIndex, endIndex);\n    \n    setProductGroups(paginatedGroups);\n  }, [allProducts, page]);\n\n  const handlePageChange = (newPage: number) => {\n    setPage(newPage);\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  // Removed filter count function\n\n  if (loading) {\n    return (\n      <div className=\"product-listing-page\">\n        <div className=\"container\">\n          <div className=\"loading-message\">Loading products...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!category) {\n    return (\n      <div className=\"product-listing-page\">\n        <div className=\"container\">\n          <div className=\"error-message\">Category not found</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"product-listing-page\">\n      <div className=\"container\">\n        {/* Page Header */}\n        <div className=\"page-header\">\n          <div className=\"breadcrumb\">\n            <a href=\"/categories\">Categories</a>\n            <span className=\"breadcrumb-separator\">â€º</span>\n            <span className=\"breadcrumb-current\">{category.display_name}</span>\n          </div>\n          <div className=\"page-header-content\">\n            <div>\n              <h1 className=\"page-title\">{category.display_name}</h1>\n              <p className=\"page-subtitle\">\n                {productGroups.length === 0 \n                  ? `${category.product_count} products available`\n                  : `${productGroups.length} products found`}\n              </p>\n            </div>\n            {/* Filter button removed - advanced filtering available in ProductBrowser */}\n          </div>\n        </div>\n\n        {/* Products Grid */}\n        <div className=\"products-grid\">\n          {productGroups.map((productGroup) => (\n            <ProductCard key={productGroup.style_code} productGroup={productGroup} />\n          ))}\n        </div>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div className=\"pagination\">\n            <button\n              onClick={() => handlePageChange(page - 1)}\n              disabled={page === 1}\n              className=\"pagination-button\"\n            >\n              Previous\n            </button>\n            \n            <div className=\"pagination-numbers\">\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map((pageNum) => (\n                <button\n                  key={pageNum}\n                  onClick={() => handlePageChange(pageNum)}\n                  className={`pagination-number ${page === pageNum ? 'active' : ''}`}\n                >\n                  {pageNum}\n                </button>\n              ))}\n            </div>\n            \n            <button\n              onClick={() => handlePageChange(page + 1)}\n              disabled={page === totalPages}\n              className=\"pagination-button\"\n            >\n              Next\n            </button>\n          </div>\n        )}\n\n        {productGroups.length === 0 && !loading && (\n          <div className=\"no-products\">\n            <p>No products found matching your filters.</p>\n          </div>\n        )}\n      </div>\n      \n      {/* Filter modal removed - advanced filtering available in ProductBrowser */}\n    </div>\n  );\n};\n\nexport default ProductListing;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}