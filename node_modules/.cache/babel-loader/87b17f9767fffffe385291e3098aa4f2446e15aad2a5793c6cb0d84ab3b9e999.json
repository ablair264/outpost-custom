{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getCategoriesWithCounts}from'../lib/supabase';import'./CategoryGrid.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryGrid=()=>{const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[selectedGroup,setSelectedGroup]=useState('all');useEffect(()=>{const fetchCategories=async()=>{try{// Get categories from Supabase with product counts\nconst categoryData=await getCategoriesWithCounts();// Transform to match our interface\nconst formattedCategories=categoryData.filter(cat=>cat.is_active&&cat.product_count>0)// Only show active categories with products\n.map(cat=>({id:cat.id,name:cat.category_key,displayName:cat.display_name,imageUrl:cat.image_url?cat.image_url.replace(/\\s+/g,'').trim()// Clean up whitespace and newlines\n:\"https://via.placeholder.com/600x400/1a1a1a/78BE20?text=\".concat(encodeURIComponent(cat.display_name)),productCount:cat.product_count,group:cat.category_group})).sort((a,b)=>b.productCount-a.productCount);// Sort by product count\nconsole.log('Formatted categories for display:',formattedCategories);setCategories(formattedCategories);}catch(error){console.error('Error fetching categories:',error);}finally{setLoading(false);}};fetchCategories();},[]);// Get unique groups for filter\nconst groups=['all',...Array.from(new Set(categories.map(cat=>cat.group)))];// Filter categories by selected group\nconst filteredCategories=selectedGroup==='all'?categories:categories.filter(cat=>cat.group===selectedGroup);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"category-grid-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-message\",children:\"Loading categories...\"})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"category-grid-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"Shop by Category\"}),/*#__PURE__*/_jsx(\"p\",{className:\"page-subtitle\",children:\"Discover our wide range of customisable clothing\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-grid-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-filter\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"sidebar-title\",children:\"Categories\"}),/*#__PURE__*/_jsx(\"div\",{className:\"group-filter\",children:groups.map(group=>/*#__PURE__*/_jsx(\"button\",{className:\"group-button \".concat(selectedGroup===group?'active':''),onClick:()=>setSelectedGroup(group),children:group==='all'?'All Categories':group},group))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-main-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"category-grid\",children:filteredCategories.map(category=>/*#__PURE__*/_jsxs(\"a\",{href:\"/categories/\".concat(category.name.toLowerCase().replace(/\\s+/g,'-')),className:\"category-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"category-image-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:category.imageUrl,alt:category.displayName,onError:e=>{e.currentTarget.src='https://via.placeholder.com/600x400/1a1a1a/78BE20?text='+encodeURIComponent(category.displayName);}})}),/*#__PURE__*/_jsx(\"div\",{className:\"category-content\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"category-name\",children:[category.displayName,/*#__PURE__*/_jsx(\"img\",{src:\"/images/green-arrow.png\",alt:\"View more\",className:\"arrow-icon\"})]})})]},category.id))}),filteredCategories.length===0&&!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"no-categories\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No categories found in this group.\"})})]})]})]})});};export default CategoryGrid;","map":{"version":3,"names":["React","useEffect","useState","getCategoriesWithCounts","jsx","_jsx","jsxs","_jsxs","CategoryGrid","categories","setCategories","loading","setLoading","selectedGroup","setSelectedGroup","fetchCategories","categoryData","formattedCategories","filter","cat","is_active","product_count","map","id","name","category_key","displayName","display_name","imageUrl","image_url","replace","trim","concat","encodeURIComponent","productCount","group","category_group","sort","a","b","console","log","error","groups","Array","from","Set","filteredCategories","className","children","onClick","category","href","toLowerCase","src","alt","onError","e","currentTarget","length"],"sources":["/home/alastair/Desktop/outpost-custom/outpost-custom/src/pages/CategoryGrid.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getCategoriesWithCounts, CategoryData } from '../lib/supabase';\r\nimport './CategoryGrid.css';\r\n\r\ninterface Category {\r\n  id: string;\r\n  name: string;\r\n  displayName: string;\r\n  imageUrl: string;\r\n  productCount: number;\r\n  group: string;\r\n}\r\n\r\nconst CategoryGrid: React.FC = () => {\r\n  const [categories, setCategories] = useState<Category[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedGroup, setSelectedGroup] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        // Get categories from Supabase with product counts\r\n        const categoryData = await getCategoriesWithCounts();\r\n        \r\n        // Transform to match our interface\r\n        const formattedCategories: Category[] = categoryData\r\n          .filter(cat => cat.is_active && cat.product_count > 0) // Only show active categories with products\r\n          .map(cat => ({\r\n            id: cat.id,\r\n            name: cat.category_key,\r\n            displayName: cat.display_name,\r\n            imageUrl: cat.image_url \r\n              ? cat.image_url.replace(/\\s+/g, '').trim() // Clean up whitespace and newlines\r\n              : `https://via.placeholder.com/600x400/1a1a1a/78BE20?text=${encodeURIComponent(cat.display_name)}`,\r\n            productCount: cat.product_count,\r\n            group: cat.category_group\r\n          }))\r\n          .sort((a, b) => b.productCount - a.productCount); // Sort by product count\r\n        \r\n        console.log('Formatted categories for display:', formattedCategories);\r\n        setCategories(formattedCategories);\r\n      } catch (error) {\r\n        console.error('Error fetching categories:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  // Get unique groups for filter\r\n  const groups = ['all', ...Array.from(new Set(categories.map(cat => cat.group)))];\r\n  \r\n  // Filter categories by selected group\r\n  const filteredCategories = selectedGroup === 'all' \r\n    ? categories \r\n    : categories.filter(cat => cat.group === selectedGroup);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"category-grid-page\">\r\n        <div className=\"container\">\r\n          <div className=\"loading-message\">Loading categories...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"category-grid-page\">\r\n      <div className=\"container\">\r\n        <div className=\"page-header\">\r\n          <h1 className=\"page-title\">Shop by Category</h1>\r\n          <p className=\"page-subtitle\">Discover our wide range of customisable clothing</p>\r\n        </div>\r\n\r\n        <div className=\"category-grid-container\">\r\n          {/* Sidebar Filter */}\r\n          <div className=\"sidebar-filter\">\r\n            <h3 className=\"sidebar-title\">Categories</h3>\r\n            <div className=\"group-filter\">\r\n              {groups.map(group => (\r\n                <button\r\n                  key={group}\r\n                  className={`group-button ${selectedGroup === group ? 'active' : ''}`}\r\n                  onClick={() => setSelectedGroup(group)}\r\n                >\r\n                  {group === 'all' ? 'All Categories' : group}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main Content */}\r\n          <div className=\"category-main-content\">\r\n            <div className=\"category-grid\">\r\n              {filteredCategories.map((category) => (\r\n                <a href={`/categories/${category.name.toLowerCase().replace(/\\s+/g, '-')}`} key={category.id} className=\"category-card\">\r\n                  <div className=\"category-image-wrapper\">\r\n                    <img \r\n                      src={category.imageUrl} \r\n                      alt={category.displayName}\r\n                      onError={(e) => {\r\n                        e.currentTarget.src = 'https://via.placeholder.com/600x400/1a1a1a/78BE20?text=' + encodeURIComponent(category.displayName);\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div className=\"category-content\">\r\n                    <h2 className=\"category-name\">\r\n                      {category.displayName}\r\n                      <img src=\"/images/green-arrow.png\" alt=\"View more\" className=\"arrow-icon\" />\r\n                    </h2>\r\n                  </div>\r\n                </a>\r\n              ))}\r\n            </div>\r\n            \r\n            {filteredCategories.length === 0 && !loading && (\r\n              <div className=\"no-categories\">\r\n                <p>No categories found in this group.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CategoryGrid;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}