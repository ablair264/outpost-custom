{"ast":null,"code":"import React,{useRef,useState}from'react';import'../styles/LogoCustomizer.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DEFAULT_MIN_WIDTH=800;// px\nconst DEFAULT_MIN_HEIGHT=800;// px\nconst MAX_FILE_SIZE_MB=10;const LogoCustomizerModal=_ref=>{var _initialConfig$x,_initialConfig$y,_initialConfig$sizePc,_initialConfig$rotati,_initialConfig$opacit,_productColors$colorI,_productColors$colorI2;let{isOpen,onClose,onApply,baseImageUrl,productColors,initialColorIndex,initialConfig}=_ref;const[logoSrc,setLogoSrc]=useState((initialConfig===null||initialConfig===void 0?void 0:initialConfig.src)||'');const[x,setX]=useState((_initialConfig$x=initialConfig===null||initialConfig===void 0?void 0:initialConfig.x)!==null&&_initialConfig$x!==void 0?_initialConfig$x:50);const[y,setY]=useState((_initialConfig$y=initialConfig===null||initialConfig===void 0?void 0:initialConfig.y)!==null&&_initialConfig$y!==void 0?_initialConfig$y:50);const[sizePct,setSizePct]=useState((_initialConfig$sizePc=initialConfig===null||initialConfig===void 0?void 0:initialConfig.sizePct)!==null&&_initialConfig$sizePc!==void 0?_initialConfig$sizePc:35);const[rotation,setRotation]=useState((_initialConfig$rotati=initialConfig===null||initialConfig===void 0?void 0:initialConfig.rotation)!==null&&_initialConfig$rotati!==void 0?_initialConfig$rotati:0);const[opacity,setOpacity]=useState((_initialConfig$opacit=initialConfig===null||initialConfig===void 0?void 0:initialConfig.opacity)!==null&&_initialConfig$opacit!==void 0?_initialConfig$opacit:0.95);const[error,setError]=useState(null);const[info,setInfo]=useState(null);const[colorIndex,setColorIndex]=useState(initialColorIndex!==null&&initialColorIndex!==void 0?initialColorIndex:0);const wrapRef=useRef(null);const logoRef=useRef(null);const draggingRef=useRef(false);const dragOffsetRef=useRef({dxPct:0,dyPct:0});const posPctRef=useRef({x,y});const rafPendingRef=useRef(false);const handleFile=file=>{setError(null);setInfo(null);if(!file)return;const sizeMb=file.size/(1024*1024);if(sizeMb>MAX_FILE_SIZE_MB){setError(\"File too large. Max \".concat(MAX_FILE_SIZE_MB,\"MB.\"));return;}const type=file.type.toLowerCase();const isRaster=type.includes('png')||type.includes('jpeg')||type.includes('jpg');const isSvg=type.includes('svg');if(!isRaster&&!isSvg){setError('Unsupported format. Use PNG, JPG or SVG.');return;}const reader=new FileReader();reader.onload=()=>{const src=reader.result;if(isSvg){setLogoSrc(src);setInfo('SVG detected. Best for sharp print results.');return;}// Raster quality check\nconst img=new Image();img.onload=()=>{const w=img.width;const h=img.height;if(w<DEFAULT_MIN_WIDTH||h<DEFAULT_MIN_HEIGHT){setError(\"Image too small. Minimum \".concat(DEFAULT_MIN_WIDTH,\"x\").concat(DEFAULT_MIN_HEIGHT,\"px recommended.\"));return;}if(w<1200||h<1200){setInfo('Image resolution is acceptable but higher is recommended for best print.');}setLogoSrc(src);};img.onerror=()=>setError('Failed to load image. Please try a different file.');img.src=src;};reader.onerror=()=>setError('Failed to read file.');reader.readAsDataURL(file);};const startDrag=e=>{if(!wrapRef.current)return;draggingRef.current=true;e.target.setPointerCapture(e.pointerId);const rect=wrapRef.current.getBoundingClientRect();const centerX=rect.left+x/100*rect.width;const centerY=rect.top+y/100*rect.height;const dxPct=(e.clientX-centerX)/rect.width*100;const dyPct=(e.clientY-centerY)/rect.height*100;dragOffsetRef.current={dxPct,dyPct};};const onDrag=e=>{if(!draggingRef.current||!wrapRef.current||!logoRef.current)return;if(rafPendingRef.current)return;rafPendingRef.current=true;requestAnimationFrame(()=>{const rect=wrapRef.current.getBoundingClientRect();const{dxPct,dyPct}=dragOffsetRef.current;const nx=(e.clientX-rect.left)/rect.width*100-dxPct;const ny=(e.clientY-rect.top)/rect.height*100-dyPct;const clampedX=Math.max(0,Math.min(100,nx));const clampedY=Math.max(0,Math.min(100,ny));posPctRef.current={x:clampedX,y:clampedY};// Update DOM directly for buttery-smooth drag without React re-render per frame\nlogoRef.current.style.left=\"\".concat(clampedX,\"%\");logoRef.current.style.top=\"\".concat(clampedY,\"%\");rafPendingRef.current=false;});};const endDrag=e=>{if(!draggingRef.current)return;draggingRef.current=false;try{e.target.releasePointerCapture(e.pointerId);}catch(_unused){}// Commit final position to React state\nsetX(posPctRef.current.x);setY(posPctRef.current.y);};const apply=()=>{if(!logoSrc){setError('Please upload a logo.');return;}onApply({src:logoSrc,x,y,sizePct,rotation,opacity},colorIndex);};return/*#__PURE__*/_jsx(\"div\",{className:\"logo-modal-overlay\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"logo-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"logo-modal-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Preview Your Logo\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,\"aria-label\":\"Close\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"logo-modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-modal-left\",children:/*#__PURE__*/_jsx(\"div\",{className:\"preview-stage\",children:productColors!==null&&productColors!==void 0&&(_productColors$colorI=productColors[colorIndex])!==null&&_productColors$colorI!==void 0&&_productColors$colorI.image||baseImageUrl?/*#__PURE__*/_jsxs(\"div\",{className:\"preview-image-wrap\",ref:wrapRef,children:[/*#__PURE__*/_jsx(\"img\",{className:\"preview-image\",src:(productColors===null||productColors===void 0?void 0:(_productColors$colorI2=productColors[colorIndex])===null||_productColors$colorI2===void 0?void 0:_productColors$colorI2.image)||baseImageUrl,alt:\"Product preview\"}),logoSrc&&/*#__PURE__*/_jsx(\"img\",{ref:logoRef,src:logoSrc,alt:\"Logo preview\",className:\"preview-logo-free\",draggable:false,style:{left:\"\".concat(x,\"%\"),top:\"\".concat(y,\"%\"),width:\"\".concat(sizePct,\"%\"),opacity,transform:\"translate(-50%, -50%) rotate(\".concat(rotation,\"deg)\")},onPointerDown:startDrag,onPointerMove:onDrag,onPointerUp:endDrag,onPointerCancel:endDrag})]}):/*#__PURE__*/_jsx(\"div\",{className:\"preview-placeholder\",children:\"No product image available\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"logo-modal-right\",children:[productColors&&productColors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"field-label\",children:\"Product colour\"}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-color-swatches\",children:productColors.map((c,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"modal-color-swatch \".concat(idx===colorIndex?'active':''),title:c.name,style:{backgroundColor:c.rgb&&c.rgb!=='Not available'?c.rgb:'#cccccc'},onClick:()=>setColorIndex(idx)},c.code||c.name+idx))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"uploader\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"field-label\",children:\"Upload your logo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/png,image/jpeg,image/svg+xml\",onChange:e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file)handleFile(file);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"hint\",children:[\"PNG, JPG or SVG. Max \",MAX_FILE_SIZE_MB,\"MB. Recommended \\u2265 \",DEFAULT_MIN_WIDTH,\"\\xD7\",DEFAULT_MIN_HEIGHT,\"px for raster.\"]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),info&&/*#__PURE__*/_jsx(\"div\",{className:\"info\",children:info})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"field-label\",children:[\"Size (\",Math.round(sizePct),\"%)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:5,max:80,step:1,value:sizePct,onChange:e=>setSizePct(parseFloat(e.target.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"field-label\",children:[\"Rotation (\",Math.round(rotation),\"\\xB0)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:-180,max:180,step:1,value:rotation,onChange:e=>setRotation(parseFloat(e.target.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"field-label\",children:[\"Opacity (\",Math.round(opacity*100),\"%)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:0.3,max:1,step:0.01,value:opacity,onChange:e=>setOpacity(parseFloat(e.target.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"logo-modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"clear-btn\",onClick:()=>{setLogoSrc('');setError(null);setInfo(null);},children:\"Clear\"}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1}}),/*#__PURE__*/_jsx(\"button\",{className:\"clear-btn\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"apply-btn\",onClick:apply,disabled:!logoSrc,children:\"Apply\"})]})]})]})]})});};export default LogoCustomizerModal;","map":{"version":3,"names":["React","useRef","useState","jsx","_jsx","jsxs","_jsxs","DEFAULT_MIN_WIDTH","DEFAULT_MIN_HEIGHT","MAX_FILE_SIZE_MB","LogoCustomizerModal","_ref","_initialConfig$x","_initialConfig$y","_initialConfig$sizePc","_initialConfig$rotati","_initialConfig$opacit","_productColors$colorI","_productColors$colorI2","isOpen","onClose","onApply","baseImageUrl","productColors","initialColorIndex","initialConfig","logoSrc","setLogoSrc","src","x","setX","y","setY","sizePct","setSizePct","rotation","setRotation","opacity","setOpacity","error","setError","info","setInfo","colorIndex","setColorIndex","wrapRef","logoRef","draggingRef","dragOffsetRef","dxPct","dyPct","posPctRef","rafPendingRef","handleFile","file","sizeMb","size","concat","type","toLowerCase","isRaster","includes","isSvg","reader","FileReader","onload","result","img","Image","w","width","h","height","onerror","readAsDataURL","startDrag","e","current","target","setPointerCapture","pointerId","rect","getBoundingClientRect","centerX","left","centerY","top","clientX","clientY","onDrag","requestAnimationFrame","nx","ny","clampedX","Math","max","min","clampedY","style","endDrag","releasePointerCapture","_unused","apply","className","role","children","onClick","image","ref","alt","draggable","transform","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","length","map","c","idx","title","name","backgroundColor","rgb","code","accept","onChange","_e$target$files","files","round","step","value","parseFloat","flex","disabled"],"sources":["/home/alastair/Desktop/outpost-custom/outpost-custom/src/components/LogoCustomizerModal.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport '../styles/LogoCustomizer.css';\n\nexport type LogoOverlayConfig = {\n  src: string;\n  // center position as percent of base image container\n  x: number; // 0-100\n  y: number; // 0-100\n  sizePct: number; // width of logo as % of base image width\n  rotation: number; // degrees\n  opacity: number; // 0-1\n};\n\ninterface ProductColorOption {\n  name: string;\n  rgb?: string;\n  image: string;\n  code?: string;\n}\n\ninterface LogoCustomizerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onApply: (config: LogoOverlayConfig, selectedColorIndex?: number) => void;\n  baseImageUrl?: string;\n  productColors?: ProductColorOption[];\n  initialColorIndex?: number;\n  initialConfig?: Partial<LogoOverlayConfig>;\n}\n\nconst DEFAULT_MIN_WIDTH = 800; // px\nconst DEFAULT_MIN_HEIGHT = 800; // px\nconst MAX_FILE_SIZE_MB = 10;\n\nconst LogoCustomizerModal: React.FC<LogoCustomizerModalProps> = ({\n  isOpen,\n  onClose,\n  onApply,\n  baseImageUrl,\n  productColors,\n  initialColorIndex,\n  initialConfig,\n}) => {\n  const [logoSrc, setLogoSrc] = useState<string>(initialConfig?.src || '');\n  const [x, setX] = useState<number>(initialConfig?.x ?? 50);\n  const [y, setY] = useState<number>(initialConfig?.y ?? 50);\n  const [sizePct, setSizePct] = useState<number>(initialConfig?.sizePct ?? 35);\n  const [rotation, setRotation] = useState<number>(initialConfig?.rotation ?? 0);\n  const [opacity, setOpacity] = useState<number>(initialConfig?.opacity ?? 0.95);\n  const [error, setError] = useState<string | null>(null);\n  const [info, setInfo] = useState<string | null>(null);\n  const [colorIndex, setColorIndex] = useState<number>(initialColorIndex ?? 0);\n\n  const wrapRef = useRef<HTMLDivElement | null>(null);\n  const logoRef = useRef<HTMLImageElement | null>(null);\n  const draggingRef = useRef(false);\n  const dragOffsetRef = useRef<{ dxPct: number; dyPct: number }>({ dxPct: 0, dyPct: 0 });\n  const posPctRef = useRef<{ x: number; y: number }>({ x, y });\n  const rafPendingRef = useRef(false);\n\n  const handleFile = (file: File) => {\n    setError(null);\n    setInfo(null);\n    if (!file) return;\n\n    const sizeMb = file.size / (1024 * 1024);\n    if (sizeMb > MAX_FILE_SIZE_MB) {\n      setError(`File too large. Max ${MAX_FILE_SIZE_MB}MB.`);\n      return;\n    }\n\n    const type = file.type.toLowerCase();\n    const isRaster = type.includes('png') || type.includes('jpeg') || type.includes('jpg');\n    const isSvg = type.includes('svg');\n    if (!isRaster && !isSvg) {\n      setError('Unsupported format. Use PNG, JPG or SVG.');\n      return;\n    }\n\n    const reader = new FileReader();\n    reader.onload = () => {\n      const src = reader.result as string;\n      if (isSvg) {\n        setLogoSrc(src);\n        setInfo('SVG detected. Best for sharp print results.');\n        return;\n      }\n      // Raster quality check\n      const img = new Image();\n      img.onload = () => {\n        const w = img.width;\n        const h = img.height;\n\n        if (w < DEFAULT_MIN_WIDTH || h < DEFAULT_MIN_HEIGHT) {\n          setError(`Image too small. Minimum ${DEFAULT_MIN_WIDTH}x${DEFAULT_MIN_HEIGHT}px recommended.`);\n          return;\n        }\n        if (w < 1200 || h < 1200) {\n          setInfo('Image resolution is acceptable but higher is recommended for best print.');\n        }\n        setLogoSrc(src);\n      };\n      img.onerror = () => setError('Failed to load image. Please try a different file.');\n      img.src = src;\n    };\n    reader.onerror = () => setError('Failed to read file.');\n    reader.readAsDataURL(file);\n  };\n\n  const startDrag = (e: React.PointerEvent) => {\n    if (!wrapRef.current) return;\n    draggingRef.current = true;\n    (e.target as HTMLElement).setPointerCapture(e.pointerId);\n\n    const rect = wrapRef.current.getBoundingClientRect();\n    const centerX = rect.left + (x / 100) * rect.width;\n    const centerY = rect.top + (y / 100) * rect.height;\n    const dxPct = ((e.clientX - centerX) / rect.width) * 100;\n    const dyPct = ((e.clientY - centerY) / rect.height) * 100;\n    dragOffsetRef.current = { dxPct, dyPct };\n  };\n\n  const onDrag = (e: React.PointerEvent) => {\n    if (!draggingRef.current || !wrapRef.current || !logoRef.current) return;\n    if (rafPendingRef.current) return;\n    rafPendingRef.current = true;\n    requestAnimationFrame(() => {\n      const rect = wrapRef.current!.getBoundingClientRect();\n      const { dxPct, dyPct } = dragOffsetRef.current;\n      const nx = ((e.clientX - rect.left) / rect.width) * 100 - dxPct;\n      const ny = ((e.clientY - rect.top) / rect.height) * 100 - dyPct;\n      const clampedX = Math.max(0, Math.min(100, nx));\n      const clampedY = Math.max(0, Math.min(100, ny));\n      posPctRef.current = { x: clampedX, y: clampedY };\n      // Update DOM directly for buttery-smooth drag without React re-render per frame\n      logoRef.current!.style.left = `${clampedX}%`;\n      logoRef.current!.style.top = `${clampedY}%`;\n      rafPendingRef.current = false;\n    });\n  };\n\n  const endDrag = (e: React.PointerEvent) => {\n    if (!draggingRef.current) return;\n    draggingRef.current = false;\n    try {\n      (e.target as HTMLElement).releasePointerCapture(e.pointerId);\n    } catch {}\n    // Commit final position to React state\n    setX(posPctRef.current.x);\n    setY(posPctRef.current.y);\n  };\n\n  const apply = () => {\n    if (!logoSrc) {\n      setError('Please upload a logo.');\n      return;\n    }\n    onApply({ src: logoSrc, x, y, sizePct, rotation, opacity }, colorIndex);\n  };\n\n  return (\n    <div className=\"logo-modal-overlay\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"logo-modal\">\n        <div className=\"logo-modal-header\">\n          <h2>Preview Your Logo</h2>\n          <button className=\"close-btn\" onClick={onClose} aria-label=\"Close\">✕</button>\n        </div>\n\n        <div className=\"logo-modal-content\">\n          <div className=\"logo-modal-left\">\n            <div className=\"preview-stage\">\n              {(productColors?.[colorIndex]?.image || baseImageUrl) ? (\n                <div className=\"preview-image-wrap\" ref={wrapRef}>\n                  <img className=\"preview-image\" src={(productColors?.[colorIndex]?.image || baseImageUrl)!} alt=\"Product preview\" />\n                  {logoSrc && (\n                    <img\n                      ref={logoRef}\n                      src={logoSrc}\n                      alt=\"Logo preview\"\n                      className=\"preview-logo-free\"\n                      draggable={false}\n                      style={{\n                        left: `${x}%`,\n                        top: `${y}%`,\n                        width: `${sizePct}%`,\n                        opacity,\n                        transform: `translate(-50%, -50%) rotate(${rotation}deg)`\n                      }}\n                      onPointerDown={startDrag}\n                      onPointerMove={onDrag}\n                      onPointerUp={endDrag}\n                      onPointerCancel={endDrag}\n                    />\n                  )}\n                </div>\n              ) : (\n                <div className=\"preview-placeholder\">No product image available</div>\n              )}\n            </div>\n          </div>\n          <div className=\"logo-modal-right\">\n            {productColors && productColors.length > 0 && (\n              <div className=\"field\">\n                <label className=\"field-label\">Product colour</label>\n                <div className=\"modal-color-swatches\">\n                  {productColors.map((c, idx) => (\n                    <button\n                      key={c.code || c.name + idx}\n                      className={`modal-color-swatch ${idx === colorIndex ? 'active' : ''}`}\n                      title={c.name}\n                      style={{ backgroundColor: c.rgb && c.rgb !== 'Not available' ? c.rgb : '#cccccc' }}\n                      onClick={() => setColorIndex(idx)}\n                    />\n                  ))}\n                </div>\n              </div>\n            )}\n            <div className=\"uploader\">\n              <label className=\"field-label\">Upload your logo</label>\n              <input\n                type=\"file\"\n                accept=\"image/png,image/jpeg,image/svg+xml\"\n                onChange={(e) => {\n                  const file = e.target.files?.[0];\n                  if (file) handleFile(file);\n                }}\n              />\n              <div className=\"hint\">PNG, JPG or SVG. Max {MAX_FILE_SIZE_MB}MB. Recommended ≥ {DEFAULT_MIN_WIDTH}×{DEFAULT_MIN_HEIGHT}px for raster.</div>\n              {error && <div className=\"error\">{error}</div>}\n              {info && <div className=\"info\">{info}</div>}\n            </div>\n\n            <div className=\"field\">\n              <label className=\"field-label\">Size ({Math.round(sizePct)}%)</label>\n              <input\n                type=\"range\"\n                min={5}\n                max={80}\n                step={1}\n                value={sizePct}\n                onChange={(e) => setSizePct(parseFloat(e.target.value))}\n              />\n            </div>\n\n            <div className=\"field\">\n              <label className=\"field-label\">Rotation ({Math.round(rotation)}°)</label>\n              <input\n                type=\"range\"\n                min={-180}\n                max={180}\n                step={1}\n                value={rotation}\n                onChange={(e) => setRotation(parseFloat(e.target.value))}\n              />\n            </div>\n\n            <div className=\"field\">\n              <label className=\"field-label\">Opacity ({Math.round(opacity * 100)}%)</label>\n              <input\n                type=\"range\"\n                min={0.3}\n                max={1}\n                step={0.01}\n                value={opacity}\n                onChange={(e) => setOpacity(parseFloat(e.target.value))}\n              />\n            </div>\n\n            <div className=\"logo-modal-actions\">\n              <button className=\"clear-btn\" onClick={() => { setLogoSrc(''); setError(null); setInfo(null); }}>Clear</button>\n              <div style={{ flex: 1 }} />\n              <button className=\"clear-btn\" onClick={onClose}>Cancel</button>\n              <button className=\"apply-btn\" onClick={apply} disabled={!logoSrc}>Apply</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LogoCustomizerModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}