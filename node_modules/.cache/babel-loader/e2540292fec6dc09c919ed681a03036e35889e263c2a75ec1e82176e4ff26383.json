{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const WishlistContext=/*#__PURE__*/createContext(undefined);export const WishlistProvider=_ref=>{let{children}=_ref;const[wishlist,setWishlist]=useState(()=>{const savedWishlist=localStorage.getItem('outpost-wishlist');return savedWishlist?JSON.parse(savedWishlist):[];});// Save wishlist to localStorage whenever it changes\nuseEffect(()=>{localStorage.setItem('outpost-wishlist',JSON.stringify(wishlist));},[wishlist]);const addToWishlist=product=>{setWishlist(prev=>{// Check if already in wishlist\nif(prev.some(item=>item.styleCode===product.style_code)){return prev;}return[...prev,{id:product.style_code,styleCode:product.style_code,name:product.style_name,brand:product.brand,price:product.price_range.min,image:product.primary_product_image_url,productType:product.product_type}];});};const removeFromWishlist=styleCode=>{setWishlist(prev=>prev.filter(item=>item.styleCode!==styleCode));};const toggleWishlist=product=>{if(isInWishlist(product.style_code)){removeFromWishlist(product.style_code);}else{addToWishlist(product);}};const isInWishlist=styleCode=>{return wishlist.some(item=>item.styleCode===styleCode);};const clearWishlist=()=>{setWishlist([]);};return/*#__PURE__*/_jsx(WishlistContext.Provider,{value:{wishlist,addToWishlist,removeFromWishlist,toggleWishlist,isInWishlist,clearWishlist},children:children});};export const useWishlist=()=>{const context=useContext(WishlistContext);if(!context){throw new Error('useWishlist must be used within a WishlistProvider');}return context;};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsx","_jsx","WishlistContext","undefined","WishlistProvider","_ref","children","wishlist","setWishlist","savedWishlist","localStorage","getItem","JSON","parse","setItem","stringify","addToWishlist","product","prev","some","item","styleCode","style_code","id","name","style_name","brand","price","price_range","min","image","primary_product_image_url","productType","product_type","removeFromWishlist","filter","toggleWishlist","isInWishlist","clearWishlist","Provider","value","useWishlist","context","Error"],"sources":["/home/alastair/Desktop/outpost-custom/outpost-custom/src/contexts/WishlistContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { GroupedProduct } from '../lib/supabase';\n\ninterface WishlistItem {\n  id: string;\n  styleCode: string;\n  name: string;\n  brand: string;\n  price: number;\n  image: string;\n  productType: string;\n}\n\ninterface WishlistContextType {\n  wishlist: WishlistItem[];\n  addToWishlist: (product: GroupedProduct) => void;\n  removeFromWishlist: (styleCode: string) => void;\n  toggleWishlist: (product: GroupedProduct) => void;\n  isInWishlist: (styleCode: string) => boolean;\n  clearWishlist: () => void;\n}\n\nconst WishlistContext = createContext<WishlistContextType | undefined>(undefined);\n\nexport const WishlistProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [wishlist, setWishlist] = useState<WishlistItem[]>(() => {\n    const savedWishlist = localStorage.getItem('outpost-wishlist');\n    return savedWishlist ? JSON.parse(savedWishlist) : [];\n  });\n\n  // Save wishlist to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('outpost-wishlist', JSON.stringify(wishlist));\n  }, [wishlist]);\n\n  const addToWishlist = (product: GroupedProduct) => {\n    setWishlist(prev => {\n      // Check if already in wishlist\n      if (prev.some(item => item.styleCode === product.style_code)) {\n        return prev;\n      }\n\n      return [\n        ...prev,\n        {\n          id: product.style_code,\n          styleCode: product.style_code,\n          name: product.style_name,\n          brand: product.brand,\n          price: product.price_range.min,\n          image: product.primary_product_image_url,\n          productType: product.product_type,\n        },\n      ];\n    });\n  };\n\n  const removeFromWishlist = (styleCode: string) => {\n    setWishlist(prev => prev.filter(item => item.styleCode !== styleCode));\n  };\n\n  const toggleWishlist = (product: GroupedProduct) => {\n    if (isInWishlist(product.style_code)) {\n      removeFromWishlist(product.style_code);\n    } else {\n      addToWishlist(product);\n    }\n  };\n\n  const isInWishlist = (styleCode: string) => {\n    return wishlist.some(item => item.styleCode === styleCode);\n  };\n\n  const clearWishlist = () => {\n    setWishlist([]);\n  };\n\n  return (\n    <WishlistContext.Provider\n      value={{\n        wishlist,\n        addToWishlist,\n        removeFromWishlist,\n        toggleWishlist,\n        isInWishlist,\n        clearWishlist,\n      }}\n    >\n      {children}\n    </WishlistContext.Provider>\n  );\n};\n\nexport const useWishlist = () => {\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}